function addOrderRow(){var t='<tr class="row-cart-item" pid="'+pid+'" cid="'+cid+'">';t+='<td class="hidden-xs"><div class="hidden-xs">',t+='<img class="image-stack-nav-item-thumb display-desktop img-responsive" src="'+p_list[pid].variants[cid][1][0].replace(".png","_s.png")+'" onerror="this.src=\''+p_list[pid].variants[cid][1][0]+'\'" alt="'+p_list[pid].variants[cid][0]+'">',t+="</div></td>",t+='<td><div class="precheckout-items-table-item"><select style="padding: 0;" class="form-select-menu style-select form-control select-order-variant" name="order-style[]">';for(var e in p_list){t+='<optgroup label="'+p_list[e].name+'">';for(var i in p_list[e].variants)t+=e==pid&&i==cid?'<option pid="'+e+'" cid="'+i+'" value="'+e+"#"+i+"#"+p_list[e].variants[i][0]+'" selected="selected">'+p_list[e].variants[i][0]+"</option>":'<option pid="'+e+'" cid="'+i+'" value="'+e+"#"+i+"#"+p_list[e].variants[i][0]+'">'+p_list[e].variants[i][0]+"</option>";t+="</optgroup>"}t+="</select></div></td>",t+='<td style="min-width: 55px;"><div class="precheckout-items-table-item-size">',p_list[pid].sizes.length?(t+='<a class="tooltip-form tooltip-size" data-toggle="tooltip" title="Choose your size"><select style="padding: 0;" class="size-select form-control" name="order-size[]"><option value="--">--</option>',$.each(p_list[pid].sizes,function(e,i){t+=sizeval===i[0]?'<option selected="selected" value="'+i[0]+'">'+i[1]+"</option>":'<option value="'+i[0]+'">'+i[1]+"</option>"}),t+="</select></a>"):t+='<div><input type="hidden" name="order-size[]" value=""/>No size</div>',t+="</div></td>",t+='<td><div class="qty"><div class="selecttor"><span class="qty-minus" data-content="{{$campaign_select->price}}"><i class="ion-minus-round"></i></span><input type="number" min=1 name="order-quantity[]" class="quantity-input" title="qty value" data-content="'+p_list[pid].price+'" value="'+$("#qty-value").val()+'" min="1"><span class="qty-plus"><i class="ion-plus-round"></i></span></div></div></td>',t+='<td><div class="precheckout-items-table-item-price"><p class="price-value" style="margin:0"><b>$'+(parseFloat(p_list[pid].price)*parseInt($("#qty-value").val())).toFixed(2)+'</b></p><a href="javascript:void(0);" class="precheckout-item-remove-button">'+remove_text+"</a></div></td></tr>",$("#table-list-cart").append(t),$(".row-cart-item:last").find("select").selectctr({css:{width:"100%",height:"35px","z-index":"initial"}}),1==$(".row-cart-item").length?$(".row-cart-item").find(".precheckout-item-remove-button").hide():$(".row-cart-item").find(".precheckout-item-remove-button").show(),$(".precheckout-item-remove-button").click(function(){$(this).closest("tr").remove(),1==$(".row-cart-item").length?$(".row-cart-item").find(".precheckout-item-remove-button").hide():$(".row-cart-item").find(".precheckout-item-remove-button").show(),showOtherLikeItem()}),$(".select-order-variant").change(function(){pid=$(this).find(":selected").attr("pid"),cid=$(this).find(":selected").attr("cid");var t=$(this).closest("tr");t.attr("pid",pid),t.attr("cid",cid),changeOrderRow(t)}),$(".size-select").change(function(){"--"===$(this).val()?$(this).closest("a").tooltip("show"):$(this).closest("a").tooltip("destroy")}),$(".qty-minus").unbind("click").bind("click",function(){var t=parseInt($(this).next().val());t>1&&(t-=1,$(this).next().val(t).trigger("change"))}),$(".qty-plus").unbind("click").bind("click",function(){var t=parseInt($(this).prev().val());t+=1,$(this).prev().val(t).trigger("change")}),$(".quantity-input").change(function(){var t=parseInt($(this).val()),e=$(this).attr("data-content"),i=t*e;$(this).closest("td").next().find(".price-value").html("<b>$"+i.toFixed(2)+"</b>")}),showOtherLikeItem()}function changeOrderRow(t){var e=t.find("img");e.attr("src",p_list[pid].variants[cid][1][0].replace(".png","_s.png")),e.attr("onerror","this.src='"+p_list[pid].variants[cid][1][0]+"'"),e.attr("alt",p_list[pid].variants[cid][0]);var i=t.find(".size-select");if(i)var a=i.val();var s=t.find(".precheckout-items-table-item-size");if(s.empty(),p_list[pid].sizes.length){var o='<a class="tooltip-form tooltip-size" data-toggle="tooltip" title="Choose your size"><select class="size-select form-control change-select" name="order-size[]"><option value="--">--</option>';$.each(p_list[pid].sizes,function(t,e){o+=a&&e[0]==a?'<option value="'+e[0]+'" selected="selected">'+e[1]+"</option>":'<option value="'+e[0]+'">'+e[1]+"</option>"}),o+="</select></a>"}else var o='<div><input type="hidden" name="order-size[]" value=""/>No size</div>';s.append(o),$(".change-select").selectctr({css:{width:"100%",height:"35px","z-index":"initial"}}),$(".change-select").removeClass("change-select");var n=t.find("p");n.html("<b>$"+p_list[pid].price+"</b>")}function showOtherLikeItem(){var t=[];$.each($(".row-cart-item"),function(e,i){t.push($(this).attr("pid"))});var e=0;$.each($(".content-also-like-list"),function(i,a){return-1==$.inArray($(this).attr("pid"),t)?(e=1,$(".content-also-like").hide(),$(this).parent().show(),!1):void 0}),0==e?($("#item-like-other").hide(),$("#item-like-other-title").hide()):($("#item-like-other").show(),$("#item-like-other-title").show())}function setupDetailPage(){$("#sl-product").val(pid),$(".li-variant").removeClass("active").each(function(t,e){$(this).attr("pid")===pid&&($(this).addClass("active"),cid||(cid=$(this).attr("cid")))}),$(".variant-list").each(function(){if($(this).attr("id")===cid){$(this).show();var t=$(this).children();$(t).removeClass("active");var e="";$(t).length<=sid&&(sid=0),e=$(t).eq(sid).addClass("active").children("img").attr("data-src");var i=$("#img-preview");$(i).fadeOut(250,function(){$(this).hide(),$(this).attr("data-zoo-image",e),$(this).empty().ZooMove({cursor:"true",scale:"2"}),$(this).show()}).fadeIn(0),$(".arrow-prev").unbind("click").bind("click",function(){sid>0?sid--:sid=t.length-1,setupDetailPage()}),$(".arrow-next").unbind("click").bind("click",function(){sid<t.length-1?sid++:sid=0,setupDetailPage()})}else $(this).hide()}),$(".ul-variant-color").each(function(){if($(this).attr("id")===pid){$(this).show();var t=$(this).children();$(t).removeClass("active").each(function(){$(this).attr("id")===cid&&$(this).addClass("active")})}else $(this).hide()}),$(".ul-variant-size").each(function(){if($(this).attr("id")===pid){$(this).show();var t=$(this).children();$(t).unbind("click").bind("click",function(){$(t).removeClass("active"),$(this).addClass("active"),sizeval=$(this).attr("id")})}else $(this).hide()})}function seturl(){var t="",e=getURLParams("catid");e&&(t+="?catid="+e),t+=e?"&pid="+pid:"?pid="+pid,t+="&cid="+cid,t+="&sid="+sid,window.history.replaceState(null,null,t)}function priceCacul(t,e){var i=t*e;$("#price-value").text("$"+i.toFixed(2))}$(document).ready(function(){$("#sl-product").selectctr({css:{width:"100%",height:"60px",margin:"10px 0","z-index":"initial"}}),"undefined"!=typeof pid&&null!==pid&&"undefined"!=typeof cid&&null!==cid&&fbq("track","ViewContent",{url:campaign_url,content_name:p_list[pid].variants[cid][0][0],content_category:category,content_ids:[cid],content_type:"product",price:p_list[pid].price.substring(1),currency:"USD"});var t=parseInt($(".time-campaign").attr("data-seconds-left"));if(0>=t)$("#p-day").text("00"),$("#p-hour").text("00"),$("#p-minute").text("00"),$("#p-second").text("00"),$("#p-day").css("color","red"),$("#p-hour").css("color","red"),$("#p-minute").css("color","red"),$("#p-second").css("color","red");else var e=setInterval(function(){t-=1e3;var i=Math.floor(t/864e5),a=Math.floor(t%864e5/36e5),s=Math.floor(t%36e5/6e4),o=Math.floor(t%6e4/1e3);10>i&&(i="0"+i),10>a&&(a="0"+a),10>s&&(s="0"+s),10>o&&(o="0"+o),$("#p-day").text(i),$("#p-hour").text(a),$("#p-minute").text(s),$("#p-second").text(o),0>=t&&(clearInterval(e),$("#p-day").css("color","red"),$("#p-hour").css("color","red"),$("#p-minute").css("color","red"),$("#p-second").css("color","red"))},1e3);$(".btn-buy").click(function(){$(".row-cart-item").remove(),fbq("track","BuyItNow",{url:campaign_url,content_name:p_list[pid].variants[cid][0][0],content_category:category,content_ids:[cid],content_type:"product",price:p_list[pid].price.substring(1),currency:"USD"}),addOrderRow(),$("#myModal").modal("show")}),$("#a-add-order-row").click(function(){addOrderRow()}),$(".btn-add-orther").click(function(){pid=$(this).parent().parent().attr("pid"),cid=$(this).parent().parent().attr("cid"),addOrderRow(),event.preventDefault()}),$("#form-submit-to-cart").submit(function(t){var e=!0;if($.each($(".size-select"),function(t,i){"--"==$(this).val()&&(e=!1,$(this).closest("a").tooltip("show"))}),$.each($(".quantity-input"),function(t,i){$(this).val()<=0&&(e=!1,$(this).closest("a").tooltip("show"))}),1==e){var i=[],a=0;$.each($(".row-cart-item"),function(t,e){i.push($(this).attr("cid"))}),$.each($(".precheckout-items-table-item-price"),function(t,e){a+=parseFloat($(this).find("p").text().match(/[+-]?\d+(\.\d+)?/g)[0])}),fbq("track","AddToCart",{url:campaign_url,content_name:campaign,content_category:category,content_ids:i,content_type:"product",price:Math.round(a,2),currency:"USD"}),$("#myModal").modal("hide"),$(".loader").show(),$(".loader-modal").show()}else t.preventDefault()}),$("#pr_code").val()&&$.ajax({url:"/checkpromotion",type:"GET",dataType:"json",data:{code:$("#pr_code").val(),campaign:$("#camp_id").val()},success:function(t){if(t&&t.id)if($("#promotion-modal").modal("show"),$(".div-promotion-alert").show(),"discount"==t.type.name){var e=parseFloat($("#price-value").attr("data-content"));if("FIX"==t.discount.type)$(".promotion-value").text(t.discount.value+"$ off"),$(".save-value").text(t.discount.value+"$"),$("#price-value").text("$"+(e-parseFloat(t.discount.value)).toString());else{$(".promotion-value").text(t.discount.value+"% off"),$(".save-value").text(t.discount.value+"%");var i=t.discount.value*e/100;$("#price-value").text("$"+(e-i).toFixed(2))}}else $(".promotion-value").text("freeship"),$(".old-price").hide(),$(".save").hide();else document.cookie="pr_code=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}}),$(".togglerDesc").bind("click",function(){$(this).hasClass("ion-plus-round")?$(this).removeClass("ion-plus-round").addClass("ion-minus-round"):$(this).removeClass("ion-minus-round").addClass("ion-plus-round");var t=$(this).parent().next();$(t).toggle()}),$(".mockup-item").bind("click",function(){var t=$(this).parent().children();sid=$(t).index(this),setupDetailPage(),seturl()}),$(".preview").bind("mouseover",function(){$(".preview-arrow").show()}).bind("mouseout",function(){$(".preview-arrow").hide()}).bind("touchstart",function(){$(".preview-arrow").show()}),$(".qty-minus").unbind("click").bind("click",function(){var t=parseInt($(this).next().val());t>1&&(t-=1,$(this).next().val(t).trigger("change"))}),$(".qty-plus").unbind("click").bind("click",function(){var t=parseInt($(this).prev().val());t+=1,$(this).prev().val(t).trigger("change")}),$("#qty-value").bind("change",function(){var t=parseInt($(this).val()),e=$(this).attr("data-content");priceCacul(t,e)}),$(".li-variant").bind("click",function(){pid=$(this).attr("pid"),cid=$(this).attr("cid"),setupDetailPage(),seturl()}),$(".product-color-list-item").click(function(){cid=$(this).attr("id"),setupDetailPage(),seturl()}),$("#sl-product").change(function(){pid=$(this).val(),$(".li-variant").each(function(){return pid===$(this).attr("pid")?($(this).trigger("click"),!1):void 0})}),$(".facebook").click(function(t){var e="https://www.facebook.com/sharer/sharer.php",i=e+"?u="+window.location.toString().split("?")[0];i+="&display=popup&ref=plugin&src=like&kid_directed_site=0";var a=575,s=400,o=($(window).width()-a)/2,n=($(window).height()-s)/2,r="status=1,width="+a+",height="+s+",top="+n+",left="+o;return window.open(i,"facebook",r),!1}),$(".twitter").click(function(t){var e="http://twitter.com/share",i=e+"?url="+window.location.toString().split("?")[0],a=575,s=400,o=($(window).width()-a)/2,n=($(window).height()-s)/2,r="status=1,width="+a+",height="+s+",top="+n+",left="+o;return window.open(i,"twitter",r),!1}),$(".list-style-group-detail").slick({arrows:!1,slidesToShow:5,dots:!1,infinite:!1,responsive:[{breakpoint:768,settings:{arrows:!1,centerMode:!1,slidesToShow:4}},{breakpoint:480,settings:{arrows:!1,centerMode:!1,slidesToShow:3}}]});var i=document.getElementById("image-product-preview"),a=new Hammer(i);a.on("swipeleft",function(t){$(".arrow-prev").trigger("click")}).on("swiperight",function(t){$(".arrow-next").trigger("click")}),setupDetailPage()});