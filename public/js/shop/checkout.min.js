$(document).ready(function(){function r(r,e){var a=$("#checkout-form");if(e.error)$(".loader").hide(),$(".loader-modal").hide(),$("#p-alert-payment-error").show(),$("#p-alert-payment-error").text(e.error.message),$(window).scrollTop(0);else{var o=e.id;a.append($('<input type="hidden" name="stripeToken">').val(o)),a.get(0).submit()}}function e(r){var e=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;return e.test(r)}if($(".select-box").selectctr({css:{width:"100%",height:"60px",margin:"10px 0","z-index":"initial"}}),"stripe"==$("#payment_card_type").val()){document.getElementById("order-card-no").addEventListener("input",function(r){r.target.value=r.target.value.replace(/[^\dA-Z]/g,"").replace(/(.{4})/g,"$1 ").trim()}),Stripe.setPublishableKey("pk_test_B4jGbQHVh8QNKY54ZckXvzvE");var a=$("#checkout-form");$(".btn-loading-progess").unbind("click"),$(".submit-order").click(function(o){var t=!0;$.trim($("#order-email").val())&&e($.trim($("#order-email").val()))?($("#order-email").parent().removeClass("has-error"),$("#p-alert-email").hide()):(t=!1,$("#order-email").parent().addClass("has-error"),$("#p-alert-email").show()),$.trim($("#order-name").val())?($("#order-name").parent().removeClass("has-error"),$("#p-alert-name").hide()):(t=!1,$("#order-name").parent().addClass("has-error"),$("#p-alert-name").show()),$.trim($("#order-address-line1").val())?($("#order-address-line1").parent().removeClass("has-error"),$("#p-alert-address").hide()):(t=!1,$("#order-address-line1").parent().addClass("has-error"),$("#p-alert-address").show()),"US"!=$("#order-country").val()||$.trim($("#order-city").val())?($("#order-city").parent().removeClass("has-error"),$("#p-alert-city").hide()):(t=!1,$("#order-city").parent().addClass("has-error"),$("#p-alert-city").show()),"US"!=$("#order-country").val()||$.trim($("#order-postal-code").val())?($("#order-postal-code").parent().removeClass("has-error"),$("#p-alert-postal-code").hide()):(t=!1,$("#order-postal-code").parent().addClass("has-error"),$("#p-alert-postal-code").show()),0==$("input:radio[name=payment-method]:checked").val()?($.trim($("#order-card-no").val())?($("#order-card-no").parent().removeClass("has-error"),$("#p-alert-card-no").hide()):(t=!1,$("#order-card-no").parent().addClass("has-error"),$("#p-alert-card-no").show()),$.trim($("#order-card-mm").val())?($("#order-card-mm").parent().removeClass("has-error"),$("#p-alert-card-mm").hide()):(t=!1,$("#order-card-mm").parent().addClass("has-error"),$("#p-alert-card-mm").show()),$.trim($("#order-card-yy").val())?($("#order-card-yy").parent().removeClass("has-error"),$("#p-alert-card-yy").hide()):(t=!1,$("#order-card-yy").parent().addClass("has-error"),$("#p-alert-card-yy").show()),$.trim($("#order-card-cvc").val())?($("#order-card-cvc").parent().removeClass("has-error"),$("#p-alert-card-cvc").hide()):(t=!1,$("#order-card-cvc").parent().addClass("has-error"),$("#p-alert-card-cvc").show())):($("#order-card-no").parent().removeClass("has-error"),$("#p-alert-card-no").hide(),$("#order-card-mm").parent().removeClass("has-error"),$("#p-alert-card-mm").hide(),$("#order-card-yy").parent().removeClass("has-error"),$("#p-alert-card-yy").hide(),$("#order-card-cvc").parent().removeClass("has-error"),$("#p-alert-card-cvc").hide()),1==t?($(".loader").show(),$(".loader-modal").show(),$(this).find(".loading-progess").css("width","100%"),0==$("input:radio[name=payment-method]:checked").val()&&(o.preventDefault(),Stripe.card.createToken(a,r))):(o.preventDefault(),$(window).scrollTop(0))})}else if("braintree"==$("#payment_card_type").val()){var a=$("#checkout-form");braintree.client.create({authorization:$("#brain_tree_key").val()},function(r,o){return r?void console.error(r):void braintree.hostedFields.create({client:o,styles:{input:{"font-size":"14px","font-family":"helvetica, tahoma, calibri, sans-serif",color:"#3a3a3a"},":focus":{color:"black"}},fields:{number:{selector:"#order-card-no",placeholder:"Card Number"},cvv:{selector:"#order-card-cvc",placeholder:"CVC"},expirationMonth:{selector:"#order-card-mm",placeholder:"MM"},expirationYear:{selector:"#order-card-yy",placeholder:"YYYY"}}},function(r,o){return r?void console.error(r):(o.on("validityChange",function(r){var e=r.fields[r.emittedBy];if(e.isValid){if("expirationMonth"===r.emittedBy||"expirationYear"===r.emittedBy){if(!r.fields.expirationMonth.isValid||!r.fields.expirationYear.isValid)return}else"number"===r.emittedBy&&$("#order-card-no").next("span").text("");$(e.container).parents(".form-group").addClass("has-success")}else e.isPotentiallyValid?($(e.container).parents(".form-group").removeClass("has-warning"),$(e.container).parents(".form-group").removeClass("has-success"),"number"===r.emittedBy&&$("#order-card-no").next("span").text("")):($(e.container).parents(".form-group").addClass("has-warning"),"number"===r.emittedBy&&$("#order-card-no").next("span").text("Looks like this card number has an error."))}),$(".btn-loading-progess").unbind("click"),void $(".submit-order").click(function(r){var t=!0;$.trim($("#order-email").val())&&e($.trim($("#order-email").val()))?($("#order-email").parent().removeClass("has-error"),$("#p-alert-email").hide()):(t=!1,$("#order-email").parent().addClass("has-error"),$("#p-alert-email").show()),$.trim($("#order-name").val())?($("#order-name").parent().removeClass("has-error"),$("#p-alert-name").hide()):(t=!1,$("#order-name").parent().addClass("has-error"),$("#p-alert-name").show()),$.trim($("#order-address-line1").val())?($("#order-address-line1").parent().removeClass("has-error"),$("#p-alert-address").hide()):(t=!1,$("#order-address-line1").parent().addClass("has-error"),$("#p-alert-address").show()),"US"!=$("#order-country").val()||$.trim($("#order-city").val())?($("#order-city").parent().removeClass("has-error"),$("#p-alert-city").hide()):(t=!1,$("#order-city").parent().addClass("has-error"),$("#p-alert-city").show()),"US"!=$("#order-country").val()||$.trim($("#order-postal-code").val())?($("#order-postal-code").parent().removeClass("has-error"),$("#p-alert-postal-code").hide()):(t=!1,$("#order-postal-code").parent().addClass("has-error"),$("#p-alert-postal-code").show()),1==t?($(".loader").show(),$(".loader-modal").show(),$(this).find(".loading-progess").css("width","100%"),0==$("input:radio[name=payment-method]:checked").val()&&(r.preventDefault(),o.tokenize(function(r,e){if(r)$(".loader").hide(),$(".loader-modal").hide(),$("#p-alert-payment-error").show(),$("#p-alert-payment-error").text(r.message),$(window).scrollTop(0);else{var o=e.nonce;a.append($('<input type="hidden" name="stripeToken">').val(o)),a.get(0).submit()}}))):(r.preventDefault(),$(window).scrollTop(0))}))})})}$("#order-country").change(function(){$(".loader").show(),$(".loader-modal").show(),$("#checkout-form").submit()}),$("input:radio[name=payment-method]").change(function(){0==$(this).val()?($(".payment-cart").show(500),$(".submit-order-cart").show(),$(".submit-order-paypal").hide()):($(".payment-cart").hide(500),$(".submit-order-cart").hide(),$(".submit-order-paypal").show())})});